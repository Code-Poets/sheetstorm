{% load data_display_filters %}
{% load data_structure_element_selectors %}

{% regroup object.get_report_ordered by author as reports_by_author %}
<div class="container narrower-container">
    <div class="table-responsive">
        {% if reports_by_author and reports_by_author|length > 1 %}
            {% include "employees/partial/display_reports/../projects_work_hours_per_author.html" %}
        {% endif %}
        {% for author in reports_by_author %}
            <table class="table table-responsive-sm">
                <thead>
                    <tr>
                        <td class="td-text-align-left-name" colspan="1">
                            <h4 title="{{ author.grouper.get_full_name  }}">
                                <b>{{ author.grouper.get_full_name }}</b>
                            </h4>
                        </td>
                        <td class="hidden-print-line" colspan="7">
                        <hr class="hr-blue-line">
                            <div class="blue-dot-hr">
                                <div class="blue-dot"></div>
                                <div class="custom-tip-hr">
                                    <div class="custom-tip"></div>
                                </div>
                            </div>
                        </hr>
                        </td>
                    </tr>
                </thead>
            </table>
            <table class="table table-responsive-sm">
                <thead>
                    <tr>
                        <th class="date-header"><div class="th-blue-border"><div class="header-text">{{ UI_text.DATE_COLUMN_HEADER.value }}</div></div></th>
                        <th class="expand-report-list-header Invisible hidden-print"></th>
                        <th class="task-activities-header "><div class="th-blue-border"><div class="header-text">{{ UI_text.TASK_ACTIVITY_HEADER.value }}</div></div></th>
                        <th class="work-hours-header "><div class="th-blue-border"><div class="header-text">{{ UI_text.WORK_HOURS_COLUMN_HEADER.value }}</div></div></th>
                        <th class="description-header "><div class="th-blue-border"><div class="header-text">{{ UI_text.DESCRIPTION_COLUMN_HEADER.value }}</div></div></th>
                        <th class="edit-button-header Invisible hidden-print"></th>
                    </tr>
                </thead>
                <tbody>
                    {% include "employees/partial/display_reports/reports_in_date_for_project_author.html" %}
                    <tr class="tr-next-day-separator">
                        <td colspan="2"></td>
                        <td colspan="hours-summary"><strong>{{ UI_text.HOURS_SUM_LABEL.value }}</strong></td>
                        <td class="work-hours-column">
                            <strong>
                                {{ monthly_hours_sum|get_key_value:author.grouper.pk|duration_field_to_string }}
                            </strong>
                            <td colspan="2"></td>
                        </td>
                    </tr>
                </tbody>
            </table>
        {% empty %}
            <div class="no-reports-message">
                <strong>{{ UI_text.NO_REPORTS_MESSAGE.value }}</strong>
            </div>
        {% endfor %}
    </div>
</div>

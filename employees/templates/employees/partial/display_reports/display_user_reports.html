{% load data_display_filters %}
{% load data_structure_element_selectors %}

<div class="container narrower-container">
    <div class="table-responsive">
        {% if reports %}
            {% include "employees/partial/display_reports/../projects_work_percentage.html" %}
        {% endif %}
        <table class="table table-responsive-sm">
            <thead>
                <tr>
                    <td class="td-text-align-left-name">
                        <h4 title="{{ user.get_full_name }}">
                            <b>{{ user.get_full_name }}</b>
                        </h4>
                    </td>
                    <td class="hidden-print-line" colspan="6">
                        <hr class="hr-blue-line">
                            <div class="blue-dot-hr">
                                <div class="blue-dot"></div>
                                <div class="custom-tip-hr">
                                    <div class="custom-tip"></div>
                                </div>
                            </div>
                        </hr>
                    </td>
                </tr>
            </thead>
        </table>
        <table class="table table-responsive-sm">
            <thead>
                <tr class="bottom-separator">
                    <th class="date-header"><div class="th-blue-border"><div class="header-text">{{ UI_text.DATE_COLUMN_HEADER.value }}</div></div></th>
                    <th class="expand-report-list-header Invisible hidden-print"></th>
                    <th class="project-header "><div class="th-blue-border"><div class="header-text">{{ UI_text.PROJECT_COLUMN_HEADER.value }}</div></div></th>
                    <th class="task-activities-header "><div class="th-blue-border"><div class="header-text">{{ UI_text.TASK_ACTIVITIES_COLUMN_HEADER.value }}</div></div></th>
                    <th class="work-hours-header "><div class="th-blue-border"><div class="header-text">{{ UI_text.WORK_HOURS_COLUMN_HEADER.value }}</div></div></th>
                    <th class="description-header "><div class="th-blue-border"><div class="header-text">{{ UI_text.DESCRIPTION_COLUMN_HEADER.value }}</div></div></th>
                    <th class="edit-button-header Invisible hidden-print"></th>
                </tr>
            </thead>
            <tbody>
            {% regroup reports by date as date %}
            {% include "employees/partial/display_reports/reports_in_date_for_author.html" %}

            <tr class="tr-next-day-separator">
                {% if not date|length == 0 %}
                    <td colspan="2"></td>
                    <td class="hours-summary"><strong>{{ UI_text.HOURS_SUM_LABEL.value }}</strong></td>
                    <td class="hidden-print"></td>
                    <td class="work-hours-column">
                        <strong>{{ monthly_hours_sum|get_key_value:user.pk|duration_field_to_string }}</strong>
                    </td>
                    <td colspan="4"></td>
                {% endif %}
            </tr>
            </tbody>
        </table>
        {% if not reports %}
            <span class="no-reports-message">
                <strong>{{ UI_text.NO_REPORTS_MESSAGE.value }}</strong>
            </span>
        {% else %}
            {% include "employees/partial/export_functionality.html" with object=request.user %}
        {% endif %}
    </div>
</div>

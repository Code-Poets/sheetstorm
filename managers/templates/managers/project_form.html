{% extends 'base.html' %}

{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}

{% block extra_head %}
    <link
        rel="stylesheet"
        href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css"
        integrity="sha384-Nlo8b0yiGl7Dn+BgLn4mxhIIBU6We7aeeiulNCjHdUv/eKHx59s3anfSUjExbDxn"
        crossorigin="anonymous"
    />
    <link
        rel="stylesheet"
        type="text/css"
        href="{% static "employees/style.css" %}"
        integrity="{% staticinline "employees/style.css" encode="sri" %}"
        crossorigin="anonymous"
    />
{% endblock %}

{% block content %}
<h2>
  <small>
    <a href="{{ back_url }}">
      <span class="glyphicon glyphicon-chevron-left"></span>
    </a>
  </small>
  {{ title }}
</h2>

<div class="modal-dialog" style="margin-bottom:0">
  <form action="." method="post">
    {% csrf_token %}
    {{ form|crispy }}
    <button type="submit" class="btn btn-default">{{ button_text }}</button>
  </form>
</div>

{% if request.user.is_admin and object %}
<br/>
<button type="button" id="opener" class="btn btn btn-danger">
  <span class="glyphicon glyphicon-remove"></span> Delete
</button>

<div id="dialog" style="display: none" title="{% trans 'Are you sure' %}?" align="center">
  {% trans 'Do you want to delete' %} <br/>
  <b>{{object.name}}</b> {% trans 'project' %}?
  <form style="display: hidden" action="{% url 'custom-project-delete' pk=object.pk %}" method="POST" id="form">
    {% csrf_token %}
  </form>
</div>
{% endif %}
{% endblock %}

{% block extra_script %}
{{ form.media }}
{% if request.user.is_admin and object %}
    <script
        src="https://code.jquery.com/jquery-3.3.1.js"
        integrity="sha384-fJU6sGmyn07b+uD1nMk7/iSb4yvaowcueiQhfVgQuD98rfva8mcr1eSvjchfpMrH"
        crossorigin="anonymous"
    ></script>
    <script
        src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"
        integrity="sha384-JPbtLYL10d/Z1crlc6GGGGM3PavCzzoUJ1UxH0bXHOfguWHQ6XAWrIzW+MBGGXe5"
        crossorigin="anonymous"
    ></script>
    <script
        type="text/javascript"
        src="{% static 'managers/scripts/delete_project_popup.js' %}"
        integrity="{% staticinline 'managers/scripts/delete_project_popup.js' encode="sri" %}"
        crossorigin="anonymous"
    ></script>
{% endif %}
{% endblock %}

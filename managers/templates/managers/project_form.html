{% extends 'base.html' %}

{% load i18n %}
{% load static %}
{% load rest_framework %}
{% load crispy_forms_tags %}

{% block extra_head %}
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
{% endblock %}

{% block content %}
<h2>
  <small>
    <a href="{{ back_url }}">
      <span class="glyphicon glyphicon-chevron-left"></span>
    </a>
  </small>
  {{ title }}
</h2>

<div class="modal-dialog" style="margin-bottom:0">
  <form action="." method="post">
    {% csrf_token %}
    {{ form|crispy }}
    <button type="submit" class="btn btn-default">{{ button_text }}</button>
  </form>
</div>

{% if request.user.is_admin and object %}
<br/>
<button type="button" id="opener" class="btn btn btn-danger">
  <span class="glyphicon glyphicon-remove"></span> Delete
</button>

<div id="dialog" style="display: none" title="{% trans 'Are you sure' %}?" align="center">
  {% trans 'Do you want to delete' %} <br/>
  <b>{{object.name}}</b> {% trans 'project' %}?
  <form style="display: hidden" action="{% url 'custom-project-delete' pk=object.pk %}" method="POST" id="form">
    {% csrf_token %}
  </form>
</div>
{% endif %}
{% endblock %}

{% block extra_script %}
{{ form.media }}
{% if request.user.is_admin and object %}
  <script src="//code.jquery.com/jquery-1.12.4.js"></script>
  <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script type="text/javascript" src="{% static 'managers/scripts/delete_project_popup.js' %}"></script>
{% endif %}
{% endblock %}
